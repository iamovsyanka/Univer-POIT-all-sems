--1. ?????????? ????? ?????? ??????? SGA.
select * from v$sga;
select SUM(VALUE) from v$sga;

--2. ?????????? ??????? ??????? ???????? ????? SGA.
select * from v$sga_dynamic_components where current_size > 0;

--3.?????????? ??????? ??????? ??? ??????? ????.
select COMPONENT, GRANULE_SIZE from v$sga_dynamic_components where current_size > 0;

--4. ?????????? ????? ????????? ????????? ?????? ? SGA.
select sum(min_size), sum(max_size), sum(current_size) from v$sga_dynamic_components;

--5. ?????????? ??????? ????? ???P, DEFAULT ? RECYCLE ????????? ????.
select component, min_size, current_size, max_size from v$sga_dynamic_components where current_size > 0;

--6. ???????? ???????, ??????? ????? ?????????? ? ??? ???P. ????????????????? ??????? ???????.
create table Lab6_6(x int) storage(buffer_pool keep);
insert into Lab6_6 values (1);
commit;

drop table Lab6_6;

select segment_name, segment_type, tablespace_name, buffer_pool from user_segments where buffer_pool = 'KEEP';

--7. ???????? ???????, ??????? ????? ???????????? ? ???? default. ????????????????? ??????? ???????.
create table Lab6_7(x int) storage(buffer_pool default);
insert into Lab6_7 values (1);
commit;

select segment_name, segment_type, tablespace_name, buffer_pool from user_segments where segment_name like '%LAB6_7%';

--8.??????? ?????? ?????? ???????? ???????.
show parameter log_buffer;

--9.??????? 10 ????? ??????? ???????? ? ??????????? ????.
select * from v$sgastat where pool = 'shared pool'
order by bytes desc
fetch first 10 rows only;

--10.??????? ?????? ????????? ?????? ? ??????? ????.
select pool, name, bytes from v$sgastat where pool = 'large pool' and name = 'free memory';

--11.???????? ???????? ??????? ?????????? ? ?????????.
select username, server from v$session;

--12.?????????? ?????? ??????? ?????????? ? ????????? (dedicated, shared).
select username, server from v$session;


select name,type,executions from v$db_object_cache where owner = '<SCHEMA>' order by executions;